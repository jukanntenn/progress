CRITICAL INSTRUCTION: You must analyze the diff content provided via STANDARD INPUT (stdin). The code diff is being piped to you through stdin using a command like: `cat diff.patch | claude -p "your prompt"`. You MUST analyze the content from stdin, NOT any files in the current working directory. The current directory is unrelated to the repository being analyzed.

Repository: {{ repo_name }}
Branch: {{ branch }}

{% if truncated %}
**WARNING**: The diff was truncated due to size limitations (original: {{ original_diff_length }} chars, analyzed: {{ analyzed_diff_length }} chars). Analysis is based on partial diff.
{% endif %}

Your task: Analyze the code diff from stdin and generate a JSON output with summary and detail.

CRITICAL FORMAT REQUIREMENTS:
1. You MUST output ONLY a valid JSON object (no markdown, no code blocks, no explanations)
2. The JSON must have exactly two fields: "summary" and "detail"
3. DO NOT output any text before or after the JSON

Remember: Analyze ONLY the diff content from stdin for repository "{{ repo_name }}".

Language requirement: The user-configured output language is "{{ language }}". Use this language for ALL your output.
For example, if the language is "zh", both summary and detail must be in Chinese.

Required JSON structure:
{
  "summary": "[A brief 1-2 paragraph summary of the main changes from the stdin diff]",
  "detail": "[Detailed analysis of the code changes from stdin, including: Breaking changes, Added public APIs, Removed public APIs, Important feature modifications, Performance-related changes, Any other significant changes. This should be formatted as Markdown with appropriate headers and bullet points.]"
}
