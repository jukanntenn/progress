<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ report.title or "Untitled Report" }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'media',
            theme: {
                extend: {
                    colors: {
                        gray: {
                            50: '#f9fafb',
                            100: '#f3f4f6',
                            200: '#e5e7eb',
                            300: '#d1d5db',
                            400: '#9ca3af',
                            500: '#6b7280',
                            600: '#4b5563',
                            700: '#374151',
                            800: '#1f2937',
                            900: '#111827',
                            950: '#0b0f19',
                        },
                        blue: {
                            600: '#2563eb',
                            700: '#1d4ed8',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 min-h-screen p-5">
    <div class="max-w-3xl mx-auto my-8 px-8 py-10 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 lg:my-10">
        <a href="/" class="inline-flex items-center text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-5 transition-colors">
            ← Back to list
        </a>
        <div class="mb-8 pb-5 border-b border-gray-200 dark:border-gray-700">
            <h1 class="text-3xl font-bold mb-2.5 text-gray-900 dark:text-gray-100 tracking-tight lg:text-2xl">{{ report.title or "Untitled Report" }}</h1>
            <div class="text-sm text-gray-600 dark:text-gray-400">
                {{ created_at }}
                {% if markpost_url %}
                <a href="{{ markpost_url }}" target="_blank" rel="noopener noreferrer" class="ml-2.5 px-2.5 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-all hover:-translate-y-px">
                    View External ↗
                </a>
                {% endif %}
            </div>
        </div>
        <div class="prose prose-gray dark:prose-invert max-w-none text-base leading-relaxed">
            {{ content_html|safe }}
        </div>
    </div>
    <style>
        .prose h1 { font-size: 2rem; margin-top: 2.5rem; margin-bottom: 1.25rem; padding-bottom: 0.75rem; border-bottom: 1px solid #e5e7eb; letter-spacing: -0.02em; }
        .prose h2 { font-size: 1.5rem; margin-top: 2.5rem; margin-bottom: 1.25rem; padding-bottom: 0.75rem; border-bottom: 2px solid #e5e7eb; font-weight: 700; letter-spacing: -0.02em; }
        .prose h3 { font-size: 1.25rem; margin-top: 2rem; margin-bottom: 1rem; font-weight: 600; position: relative; padding-left: 1rem; }
        .prose h3::before { content: ''; position: absolute; left: 0; top: 0.2em; bottom: 0.2em; width: 4px; background: linear-gradient(180deg, #2563eb 0%, #1d4ed8 100%); border-radius: 2px; }
        .prose h4 { font-size: 1rem; margin-top: 1.75rem; margin-bottom: 0.75rem; font-weight: 600; }
        .prose p { margin-bottom: 1.5rem; }
        .prose ul, .prose ol { margin-bottom: 1.5rem; padding-left: 1.75rem; }
        .prose li { margin-bottom: 0.5rem; line-height: 1.75; }
        .prose ul > li::marker { color: #3b82f6; }
        .prose ol > li::marker { color: #3b82f6; font-weight: 600; }
        .prose code { background: #f6f8fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, monospace; font-size: 85%; color: #e83e8c; border: 1px solid #e2e8f0; word-break: break-word; }
        .prose pre { background: #1e293b; padding: 1.25rem; border-radius: 8px; overflow-x: auto; margin-bottom: 1.5rem; border: 1px solid #334155; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04); }
        .prose pre code { background: transparent; padding: 0; color: #e2e8f0; border: none; font-size: 0.875rem; line-height: 1.6; }
        .prose blockquote { border-left: 4px solid #3b82f6; padding-left: 1.25rem; margin-bottom: 1.5rem; color: #4a5568; background: linear-gradient(90deg, #f0f7ff 0%, #ffffff 100%); padding: 1.25rem 1.75rem; border-radius: 0 8px 8px 0; }
        .prose a { color: #0969da; text-decoration: none; border-bottom: 1px solid transparent; transition: border-bottom-color 0.2s ease, color 0.2s ease; }
        .prose a:hover { color: #1d4ed8; border-bottom-color: #1d4ed8; }
        .prose table { border-collapse: collapse; margin-bottom: 1.5rem; width: 100%; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04); }
        .prose table th, .prose table td { border: 1px solid #d0d7de; padding: 0.75rem 1rem; text-align: left; word-break: break-word; }
        .prose table th { background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%); font-weight: 600; color: #475569; text-transform: uppercase; font-size: 0.8125rem; letter-spacing: 0.05em; }
        .prose table tr:last-child td { border-bottom: none; }
        .prose table tr:hover td { background: #f8fafc; }
        .prose img { max-width: 100%; height: auto; border-radius: 8px; margin: 1.5rem 0; }
        .prose hr { border: none; height: 2px; background: linear-gradient(90deg, transparent 0%, #e8ecf1 50%, transparent 100%); margin: 2.5rem 0; }
        .dark .prose h1 { border-bottom-color: #21262d; }
        .dark .prose h2 { border-bottom-color: #21262d; }
        .dark .prose code { background: #161b22; border-color: #30363d; color: #ff7b72; }
        .dark .prose pre { background: #0d1117; border-color: #30363d; }
        .dark .prose blockquote { background: linear-gradient(90deg, #161b22 0%, #1c2128 100%); color: #9ca3af; border-left-color: #4a9eff; }
        .dark .prose a { color: #4a9eff; }
        .dark .prose a:hover { color: #6cb6ff; border-bottom-color: #6cb6ff; }
        .dark .prose table th, .dark .prose table td { border-color: #30363d; }
        .dark .prose table th { background: linear-gradient(180deg, #161b22 0%, #21262d 100%); color: #9ca3af; }
        .dark .prose table tr:hover td { background: #21262d; }
        .dark .prose hr { background: linear-gradient(90deg, transparent 0%, #21262d 50%, transparent 100%); }
        @media (max-width: 768px) {
            body { background: white; }
            .dark body { background: #1c2128; }
            .prose h1 { font-size: 1.625rem; }
            .prose h2 { font-size: 1.375rem; }
            .prose h3 { font-size: 1.125rem; }
            .prose table { font-size: 0.875rem; display: block; overflow-x: auto; white-space: nowrap; }
            .prose pre { padding: 1rem; font-size: 0.8125rem; }
        }
        @media (max-width: 480px) {
            .prose h1 { font-size: 1.375rem; }
            .prose h2 { font-size: 1.1875rem; }
            .prose h3 { font-size: 1rem; padding-left: 0.75rem; }
            .prose h3::before { width: 3px; }
            .prose pre code { font-size: 0.8125rem; }
            .prose blockquote { padding: 1rem 1.25rem; }
        }
    </style>
</body>
</html>
